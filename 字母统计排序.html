<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Character frequency</title>
    <script type="text/javascript">
    function letterFrequency(text){
       text = text.toLowerCase();//小写
       text = text.replace(/[^A-Za-z]/g,"");//去杂质非字母的用空字符替换
       var temp = new Array();
       var arr = Array.from(new Set(text));//去重
       for(var i=0;i<=arr.length-1;i++)//制作二维数组
       {
         temp[i] = new Array();
         for(var j=0;j<=arr.length-1;j++)
         {
           temp[i][0]=arr[i];
           temp[i][1]=text.split(arr[i]).length-1;
         }
       }
         var text = temp.sort(function(a,b){
           if(a[1]>b[1]) return -1;//如果数字a>b则a在前
           if(a[1]<b[1]) return 1;//b在前
           if(a[1]==b[1])//相等的时候按字母排序
             {
               if(a[0]>b[0])
               {
                 return 1;
               }
               else if(a[0]<b[0])
                 return -1;
               else return 0;
             }
         });
         return text;
       }
    console.log(letterFrequency("I had 1 item then I had 4 now I have 5. How nice."));
    </script>
    <script type="text/javascript">
      //大佬的最佳实践
      function letterFrequency(text){
      return (text.toLowerCase()
                  .replace(/[^a-z]/g,"")
                  .split("")
                  .sort()
                  .join("")
                  .match(/(\w)\1+|(\w)/g) || [])
                  .map(function(v){ return [v[0], v.length]; })
                  .sort(function(a,b){
                      if (a[1] === b[1]) return (a[0].charCodeAt(0) - b[0].charCodeAt(0))
                      else return b[1] - a[1]
                  });
    }
    </script>
  </head>
  <body>

  </body>
</html>
